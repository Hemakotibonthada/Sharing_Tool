â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              FILE UPLOAD & DISPLAY - DEBUG GUIDE                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” ISSUE: Uploaded files not showing in file manager tab

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ CURRENT STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ shared_files folder EXISTS but is EMPTY (0 files)
âœ“ Metadata has 3 entries (orphaned - files were deleted)
âœ“ 3 users registered (admin, Hema, testuser123)
âš ï¸  Files uploaded before were deleted from disk

DIAGNOSIS:
  â€¢ Files metadata exists but actual files are missing
  â€¢ Need to upload NEW files and check if they save properly
  â€¢ Enhanced logging added to track upload process

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª STEP-BY-STEP DEBUG PROCESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: Check Current State
  Run: python debug_file_listing.py
  Expected: Shows 0 files in shared_files folder

STEP 2: Start Server
  Run: python app.py
  Expected: Server starts on port 5001

STEP 3: Open Browser with Console
  1. Navigate to: http://localhost:5001/
  2. Press F12 to open Developer Tools
  3. Go to Console tab
  4. Keep console open during testing

STEP 4: Login
  1. If not logged in, go to http://localhost:5001/login
  2. Login with: admin / admin (or your credentials)
  3. Check console for:
     âœ“ "On login page, skipping main app initialization"
     âœ“ Login success messages

STEP 5: Go to Main Page
  1. After login, you should be at main page
  2. Check console for:
     âœ“ "High-speed transfer system initialized"
     âœ“ "Loading files... authToken: Present"
     âœ“ "Response status: 200 OK"
     âœ“ "Files loaded: 0 files"
     âœ“ "renderFiles called. Total files: 0"

STEP 6: Navigate to Upload Section
  1. Click "Upload" in sidebar OR click "Uploads" card on dashboard
  2. Check console for any errors

STEP 7: Upload a Test File
  1. Click "Select Files" or drag-and-drop a small file (< 10MB)
  2. Watch console for these messages:
     âœ“ "handleFiles called with: ..."
     âœ“ "Files to upload: 1"
     âœ“ "uploadQueue div: <div>..."
     âœ“ "Adding file to queue: filename.ext"
     âœ“ "Using regular HTTP upload for: filename.ext"
     âœ“ "Upload completed. Status: 200 Response: ..."
     âœ“ "Reloading files list after upload..."
     âœ“ "Files loaded: 1 files"

STEP 8: Check Network Tab
  1. In Developer Tools, go to Network tab
  2. Upload a file
  3. Look for:
     âœ“ POST /upload (Status: 200)
     âœ“ GET /files (Status: 200)
  4. Click on /upload request:
     - Check Request Payload (file data)
     - Check Response (should be JSON with file info)

STEP 9: Navigate to Files Section
  1. Click "Files" in sidebar OR click "Total Files" card
  2. Check console for:
     âœ“ "renderFiles called. Total files: 1"
     âœ“ "Displaying 1 files in grid"
  3. Visual Check:
     âœ“ File card should appear in grid
     âœ“ File name, size, date visible
     âœ“ No "empty state" message

STEP 10: Verify Files on Disk
  Run: python debug_file_listing.py
  Expected: Shows 1 file in shared_files folder

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” CONSOLE MESSAGES TO WATCH FOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… GOOD MESSAGES (Expected):
  "On login page, skipping main app initialization"
  "High-speed transfer system initialized"
  "Loading files... authToken: Present"
  "Response status: 200 OK"
  "Files loaded: N files"
  "renderFiles called. Total files: N"
  "handleFiles called with: ..."
  "Upload completed. Status: 200"
  "Reloading files list after upload..."
  "Displaying N files in grid"

âŒ BAD MESSAGES (Problems):
  "Loading files... authToken: Missing" â†’ Not logged in!
  "Response status: 401" â†’ Authentication failed
  "Response status: 500" â†’ Server error
  "Failed to load files" â†’ API error
  "Upload failed: filename" â†’ Upload error
  "No files to display. Showing empty state." â†’ Files not loaded

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› COMMON ISSUES & SOLUTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ISSUE 1: "Loading files... authToken: Missing"
SOLUTION:
  â€¢ You're not logged in
  â€¢ Go to /login and login
  â€¢ Check if redirecting to login page repeatedly
  â€¢ Clear localStorage and login again

ISSUE 2: "Response status: 401 Unauthorized"
SOLUTION:
  â€¢ Token expired or invalid
  â€¢ Logout and login again
  â€¢ Clear browser data (F12 â†’ Application â†’ Clear storage)

ISSUE 3: "Upload completed. Status: 500"
SOLUTION:
  â€¢ Server error during upload
  â€¢ Check terminal/server console for Python errors
  â€¢ Check if shared_files folder has write permissions
  â€¢ Try uploading smaller file

ISSUE 4: "Files loaded: 0 files" (but files exist on disk)
SOLUTION:
  â€¢ Files don't have metadata
  â€¢ Files in wrong folder (should be in shared_files/)
  â€¢ Permission mismatch (can't access files)
  â€¢ Run: python debug_file_listing.py to verify

ISSUE 5: Upload shows 100% but file doesn't appear
SOLUTION:
  â€¢ File uploaded but loadFiles() didn't run
  â€¢ Manually refresh: Click Files tab again
  â€¢ Check console for "Reloading files list..." message
  â€¢ Check Network tab for GET /files request

ISSUE 6: "filesGrid element: null"
SOLUTION:
  â€¢ DOM element missing in HTML
  â€¢ Wrong page or section not active
  â€¢ Navigate to Files section first

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ MANUAL TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEST 1: API Endpoint (Command Line)
  PowerShell:
  > $token = "your_auth_token_here"
  > Invoke-WebRequest -Uri "http://localhost:5001/files" `
      -Headers @{ "Authorization" = "Bearer $token" } `
      -Method GET
  Expected: JSON array of files

TEST 2: Check Folder Manually
  PowerShell:
  > Get-ChildItem shared_files
  Expected: List of uploaded files

TEST 3: Upload via curl (Alternative)
  PowerShell:
  > curl -F "file=@test.txt" `
      -H "Authorization: Bearer $token" `
      http://localhost:5001/upload
  Expected: JSON response with file info

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before Testing:
  â–¡ Server running (python app.py)
  â–¡ Browser console open (F12)
  â–¡ Network tab visible
  â–¡ Logged in with valid account

During Upload:
  â–¡ Console shows "handleFiles called"
  â–¡ Upload progress bar appears
  â–¡ Upload reaches 100%
  â–¡ Console shows "Upload completed. Status: 200"
  â–¡ Console shows "Reloading files list..."
  â–¡ Toast notification appears

After Upload:
  â–¡ Navigate to Files tab
  â–¡ File card appears in grid
  â–¡ File name/size/date visible
  â–¡ No empty state message
  â–¡ Run debug script shows file on disk

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ IF STILL NOT WORKING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Capture Console Log:
   - Open console (F12)
   - Upload a file
   - Right-click in console â†’ Save as...
   - Share the log file

2. Check Server Terminal:
   - Look for errors in Python output
   - Look for upload confirmation messages
   - Check for permission errors

3. Verify File System:
   - Run: python debug_file_listing.py
   - Check if shared_files folder has files
   - Check if metadata matches files

4. Test with Different File:
   - Try very small file (< 1KB)
   - Try text file instead of binary
   - Try different file extension

5. Check Browser:
   - Try incognito window
   - Try different browser
   - Clear all cache/cookies

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Enhanced Logging Added:
  â€¢ Upload completion logging
  â€¢ File loading detailed logs
  â€¢ Render function logs
  â€¢ Network response logging

Next: Follow the steps above and report what you see in the console!
